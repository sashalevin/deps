2a872fa4e9c8 ("ring-buffer: Check if memory is available before allocation")
